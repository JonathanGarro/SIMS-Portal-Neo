{% extends "layout.html" %}
{% block content %}
<div class="container">
	<div class="" id="hideMe">
		{% with messages = get_flashed_messages(with_categories=true) %}
   			{% if messages %}
	   			{% for category, message in messages %}
		   			<div class="alert alert-{{ category }}">
			   			{{ message }} 
		   			</div>
	   			{% endfor %}
   			{% endif %}
		{% endwith %}
	</div>
	<div class="row mb-5">
		<div class="col col-md-4 rounded rounded-3">
			<div class="card border-0 p-4 bg-light">
				<div class="row">
					<img src="{{ profile_picture }}" class="img-fluid mb-4" >
				</div>
				<div class="row">
					<h2 class="text-danger">{{ current_user.firstname }} {{ current_user.lastname }}</h2>
				</div>
				<div class="row">
					<h5 class="text-secondary mt-4">Role</h5>
					<h4>{{ current_user.job_title }}</h4>
				</div>
				<div class="row">
					<h5 class="text-secondary mt-4">National Society</h5>
					<h4>{{ ns_association }}</h4>
				</div>
				<div class="list-group mt-5">
			  		<a href="{{ url_for('update_profile') }}" class="list-group-item list-group-item-action text-secondary">Update Profile</a>
			  		<a href="#" class="list-group-item list-group-item-action text-secondary">Assign to Disaster</a>
			  		<a href="#" class="list-group-item list-group-item-action text-secondary">Add to Portfolio</a>
			  		<a href="#" class="list-group-item list-group-item-action text-danger">Delete Member</a>
				</div>
			</div>
		</div>
		<div class="col mx-4">
			<div class='mb-5'>
				{% if current_user.status == 'Pending' %}
				<div class="alert alert-warning mb-4" role="">
					Hi {{ current_user.firstname }}, your account is still pending approval by a SIMS administrator. 
				</div>
				{% endif %}
				
				{#
				<div class="mb-3">
					<ul class="nav justify-content-end">
				  	<li class="nav-item">
						<a class="nav-link text-danger" href="#">About</a>
				  	</li>
				  	<li class="nav-item">
						<a class="nav-link text-danger" href="#">Operations</a>
				  	</li>
				  	<li class="nav-item">
						<a class="nav-link text-danger" href="#">Portfolio</a>
				  	</li>
					<li class="nav-item">
						<a class="nav-link text-danger" href="#">Achievements</a>
					</li>
					</ul>
				</div>
				#}
				
				<h3 class="mb-3 text-danger">About {{ user_info.firstname }}</h3>
				{{ user_info.bio }}<br><br>
				<h5 class="mb-3 text-danger">Skills</h5>
				<button type="button" class="btn btn-danger">Illustrator</button>
				<button type="button" class="btn btn-danger">InDesign</button>
				<button type="button" class="btn btn-danger">Python</button>
			</div>
			<div class='mb-5'>
				<h3 class="mb-3 text-danger">Operations Supported: <span class='text-dark'>{{ deployment_history_count }}</span></h3>
				{% if deployment_history_count == 0 %}
					No deployments yet.
				{% else %}
				<table class="table">
			  	<thead class="">
					<tr>
				  	<th>Event</th>
				  	<th>Role</th>
				  	<th>Start Date</th>
				
					</tr>
			  	</thead>
			  	<tbody>
				  	{% for assignment in assignment_history %}
				  	<tr>
						<td class="fw-bold"><a href="/emergency/{{assignment.Emergency.id}}" class="link-danger">{{assignment.Emergency.emergency_name}}</a></td>
						<td>{{assignment.Assignment.role}}</td>
						<td>{{assignment.Assignment.start_date}}</td>  
				  	</tr>
				  	{% endfor %}
			  	</tbody>
				</table>
				{% endif %}
			</div>
			<div class='mb-5'>
				<h3 class="mb-3 text-danger">Portfolio Highlights</h3>
				<div class="row row-cols-3 row-cols-md-3 g-4 mt-4">
				{% for product in user_portfolio %}
					<div class="col d-flex align-items-stretch">
						<div class="card" style="width: 18rem;">
					  	<img src="/static/assets/portfolio/{{product.Portfolio.final_file_location}}" class="card-img-top" alt="...">
					  	<div class="card-body d-flex flex-column">
							<h5 class="card-title mt-auto">{{product.Portfolio.title}}</h5>
							<a href="#" class="btn btn-outline-danger mt-5">View</a>
					  	</div>
						</div>
					</div>
				{% endfor %}
				</div>
			</div>
			<div class='mb-3'>
			<h3 class="mb-3 text-danger">Achievements</h3>
			
			</div>

		</div>
		
	</div>
</div>
{% endblock content %}